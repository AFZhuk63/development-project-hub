<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projects</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="projects-container">
        <!-- Sidebar (Left Frame) -->
        <div class="sidebar">
            <div class="logo">
                <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Logo">
            </div>
            <div class="menu">
                <div class="menu-section group-1">
                    <div class="menu-item" id="menu-projects"><a href="{{ url_for('projects_page') }}">Проекты</a></div>
                    <div class="menu-item" id="menu-admin"><a href="{{ url_for('admin_page') }}">Администратор</a></div>
                    <div class="menu-item" id="menu-list-participants"><a href="{{ url_for('list_all_users') }}">Список всех участников</a></div>
                    <div class="menu-item" id="menu-list-tasks"><a href="{{ url_for('all_tasks') }}">Список всех задач</a></div>
                </div>
                <div class="menu-section">
                    <div class="menu-header" id="menu-admin-header">АДМИНИСТРИРОВАНИЕ</div>
                    <div class="menu-section group-2">
                        <div class="menu-item" id="menu-add-participant"><a href="{{ url_for('add_user') }}">Добавить участника</a></div>
                        <div class="menu-item" id="menu-remove-participant"><a href="{{ url_for('user_del') }}">Удалить участника</a></div>
                        <div class="menu-item" id="menu-participant-list"><a href="{{ url_for('list_user_project') }}">Список участников проекта</a></div>
                        <div class="menu-item" id="menu-task-manager"><a href="{{ url_for('task_users_manager') }}">Менеджер задач участника</a></div>
                        <div class="menu-item" id="menu-work-report"><a href="{{ url_for('report_users') }}">Отчёт о работе участников</a></div>
                    </div>
                </div>
                <div class="menu-section">
                    <div class="menu-header" id="menu-my-tasks">МОИ ЗАДАЧИ</div>
                    <div class="menu-section group-3">
                        <div class="menu-item" id="menu-view-tasks"><a href="{{ url_for('list_tasks_see') }}">Просмотреть список задач</a></div>
                        <div class="menu-item" id="menu-add-task"><a href="{{ url_for('add_task') }}">Добавить задачу</a></div>
                        <div class="menu-item" id="menu-set-deadline"><a href="{{ url_for('deadline_task') }}">Установить срок выполнения задачи</a></div>
                        <div class="menu-item" id="menu-save-task"><a href="{{ url_for('save_task_file') }}">Сохранить задачу в файл</a></div>
                        <div class="menu-item" id="menu-change-status"><a href="{{ url_for('change_task_status') }}">Изменить статус задачи</a></div>
                        <div class="menu-item" id="menu-save-report"><a href="{{ url_for('save_report') }}">Сохранить отчёт выполненных задач</a></div>
                        <div class="menu-item" id="menu-delete-task"><a href="{{ url_for('del_task') }}">Удалить задачу</a></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Header (Top Frame) -->
        <div class="header">
            <div class="time">
                <span id="current-time"></span>
                <span class="date" id="current-date"></span>
                <span class="day-of-week" id="current-day"></span>
                <select id="language-selector">
                    <option value="en" selected>English</option>
                    <option value="de">Deutsch</option>
                    <option value="fr">Français</option>
                    <option value="ru">Русский</option>
                </select>
            </div>
            <div class="user-profile">
                <div class="user-logo" id="user-logo">
                    <img id="profile-photo" src="{{ url_for('static', filename='images/default_user.png') }}" alt="User Logo">
                </div>
                <div class="user-menu" id="user-menu" style="display: none;">
                    <div class="user-info-frame">
                        <div class="user-icon">
                            <img id="profile-photo-frame" src="{{ url_for('static', filename='images/default_user.png') }}" alt="User Photo">
                        </div>
                        <div class="user-login" id="user-login">user@example.com</div>
                        <a href="#" class="edit-profile-link" id="edit-profile">
                            <i class="fas fa-pencil-alt"></i> Редактировать профиль
                        </a>
                    </div>
                    <div class="user-edit-frame" id="user-edit-frame" style="display: none;">
                        <form id="profile-form" enctype="multipart/form-data" action="/save_profile" method="POST">
                            <label for="profile-photo-upload" id="label-upload">Загрузить фото:</label>
                            <input type="file" id="profile-photo-upload" accept="image/*">
                            <label for="last-name" id="label-last-name">Фамилия:</label>
                            <input type="text" id="last-name" name="last-name">
                            <label for="first-name" id="label-first-name">Имя:</label>
                            <input type="text" id="first-name" name="first-name">
                            <label for="birthdate" id="label-birthdate">Дата рождения:</label>
                            <input type="date" id="birthdate" name="birthdate">
                            <label for="phone" id="label-phone">Контактный телефон:</label>
                            <input type="text" id="phone" name="phone">
                            <button type="submit" id="button-save">Сохранить</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Sidebar -->
        <div class="right-sidebar">
            <div class="notification-icon">
                <i class="fas fa-bell"></i>
            </div>
            <div class="chat-icon">
                <i class="fas fa-comment-dots"></i>
            </div>
            <div class="contact-icons">
                <i class="fab fa-whatsapp"></i>
                <i class="fab fa-telegram"></i>
                <i class="fab fa-discord"></i>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="project-menu" style="padding-left: 1cm; padding-right: 2cm;">
                <div class="menu-item2" id="menu-asciidoc">Asciidoc</div>
                <div class="menu-item2" id="menu-jira">Jira</div>
                <div class="menu-item2" id="menu-patterns">Patterns</div>
                <div class="menu-item2" id="menu-status">Статус</div>
                <div class="menu-item2" id="menu-timeline">Timeline</div>
                <div class="menu-item2" id="menu-completed">Завершённые</div>
            </div>
            <div class="content" id="content">
                <!-- Основной контент будет загружаться здесь -->
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const userLogo = document.getElementById('user-logo');
            const userMenu = document.getElementById('user-menu');

            userLogo.addEventListener('click', function(event) {
                event.stopPropagation();
                userMenu.style.display = userMenu.style.display === 'block' ? 'none' : 'block';
            });

            document.addEventListener('click', function(event) {
                if (!userLogo.contains(event.target) && !userMenu.contains(event.target)) {
                    userMenu.style.display = 'none';
                }
            });

            const editProfileLink = document.getElementById('edit-profile');
            const userEditFrame = document.getElementById('user-edit-frame');

            editProfileLink.addEventListener('click', function(e) {
                e.preventDefault();
                userEditFrame.style.display = userEditFrame.style.display === 'block' ? 'none' : 'block';
            });

            document.addEventListener('click', function(event) {
                if (!userEditFrame.contains(event.target) && !editProfileLink.contains(event.target)) {
                    userEditFrame.style.display = 'none';
                }
            });

            // Load content into the frame
            document.querySelectorAll('.menu-item a').forEach(function(link) {
                link.addEventListener('click', function(event) {
                    event.preventDefault();
                    fetch(link.href)
                        .then(response => response.text())
                        .then(html => {
                            document.getElementById('content').innerHTML = html;
                        });
                });
            });

            function updateTimeAndDate() {
                const now = new Date();
                const hours = now.getHours().toString().padStart(2, '0');
                const minutes = now.getMinutes().toString().padStart(2, '0');
                const day = now.getDate().toString().padStart(2, '0');
                const month = (now.getMonth() + 1).toString().padStart(2, '0');
                const year = now.getFullYear();

                const daysOfWeek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
                const dayOfWeek = daysOfWeek[now.getDay()];

                document.getElementById('current-time').textContent = `${hours}:${minutes}`;
                document.getElementById('current-date').textContent = `${day}.${month}.${year}`;
                document.getElementById('current-day').textContent = dayOfWeek;
            }

            setInterval(updateTimeAndDate, 1000);
            updateTimeAndDate();
        });
    </script>
</body>
</html>
